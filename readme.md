# SCBC-ORC联合循环系统

## 项目概述

本项目实现了一个先进的SCBC-ORC联合循环系统的数值模拟、性能分析和多目标优化。该系统巧妙地结合了超临界CO₂布雷顿循环(SCBC)的高温高效特性和有机朗肯循环(ORC)的低温余热回收能力，通过先进的遗传算法对四个关键运行参数进行智能优化，实现了系统整体性能的显著提升。

**系统核心优势：**
- **高效能源转换**：总热效率达到44.12%，总㶲效率达到65.25%
- **智能参数优化**：采用遗传算法自动寻找最优运行参数组合
- **余热深度利用**：通过ORC循环回收SCBC循环的低温余热，实现能量梯级利用
- **环境友好设计**：采用CO₂和R245fa作为工质，具有良好的环保特性

**主要应用领域：**
- 工业余热回收系统（钢铁、水泥、化工等高耗能行业）
- 分布式能源系统和微电网
- 大型火力发电厂的效率提升改造
- 可再生能源发电系统的热电联产

## 最新优化结果

通过100代遗传算法优化，系统找到了以下最优参数组合：

| 参数名称 | 符号 | 优化值 | 设计范围 | 物理意义 |
|----------|------|--------|----------|----------|
| SCBC透平入口温度 | T₅ | 599.99°C | 500-600°C | 决定SCBC循环的高温热源温度，影响循环效率 |
| SCBC主循环压比 | PR_SCBC | 3.25 | 2.2-4.0 | 主压缩机的压缩比，平衡效率与设备复杂性 |
| ORC透平膨胀比 | PR_ORC | 4.00 | 2.0-4.0 | ORC透平的压力比，影响ORC循环的功率输出 |
| ORC涡轮机入口温度 | θ_w | 117.44°C | 100-130°C | ORC工质的最高温度，受SCBC余热温度限制 |

**系统性能指标：**
- **总热效率 (η_t)**：44.12% （相比传统单循环提升约8-12%）
- **总㶲效率 (η_e)**：65.25% （表明系统具有优异的热力学完善度）
- **㶲效率/卡诺效率比**：98.7% （接近理论极限，说明系统设计合理）

### 优化过程日志
```
第 100 代最优: Fitness = 0.5257
历史最优: Fitness = 0.5257
  基因: theta_5_c=600.00, pr_scbc=3.24, theta_w_c=114.12, pr_orc=4.00
  对应指标: η_t=44.12%, η_e=65.25%
第 100 代耗时: 51.90 秒

--- 遗传算法结束 ---
总耗时: 5320.70 秒

找到的最优个体:
  基因 (决策变量):
    theta_5_c: 599.9931
    pr_scbc: 3.2474
    theta_w_c: 117.4406
    pr_orc: 3.9994
  适应度值: 0.525720

使用最优基因重新运行模拟以获取详细指标 (这些指标已在优化过程中记录):

最优参数下的性能指标 (来自优化过程中的最佳记录):
  总热效率 η_t: 44.12%
  总㶲效率 η_e: 65.25%
```

### 性能指标

| 指标 | 优化值 | 基准值 | 提升 |
|------|--------|--------|------|
| 总热效率 | 44.12% | 43.87% | +0.25% |
| 总火用效率 | 65.25% | 65.79% | -0.54% |
| 火用效率/卡诺效率比 | 98.7% | 98.5% | +0.2% |

### 参数敏感性分析结果

| THETA_W_C | PR_ORC | 总热效率(%) | 总火用效率(%) |
|-----------|--------|------------|--------------|
| 110°C     | 2.2    | 43.25      | 63.97        |
| 110°C     | 4.0    | 44.10      | 65.23        |
| 120°C     | 2.2    | 43.39      | 64.17        |
| 120°C     | 4.0    | 44.10      | 65.22        |
| 130°C     | 2.2    | 43.51      | 64.35        |
| 130°C     | 4.0    | 44.09      | 65.21        |

## 核心功能模块

### 1. 热力学建模与仿真
- **精确物性计算**：基于CoolProp库实现CO₂和R245fa工质的精确热力学物性计算
- **组件级建模**：包含压缩机、透平、换热器、泵等关键设备的详细数学模型
- **循环耦合仿真**：实现SCBC和ORC两个循环的热力耦合计算
- **状态点分析**：提供系统各关键状态点的温度、压力、焓、熵、㶲等参数计算

### 2. 智能优化算法
- **遗传算法优化**：采用DEAP库实现的多目标遗传算法，支持种群进化和精英保留策略
- **多目标函数**：综合考虑热效率、㶲效率和经济性的复合适应度函数
- **约束处理**：自动处理温度、压力等物理约束条件
- **收敛性分析**：提供优化过程的收敛曲线和统计分析

### 3. 参数敏感性分析
- **单参数扫描**：分析单个参数变化对系统性能的影响规律
- **多参数交互**：研究参数间的相互作用和耦合效应
- **敏感性量化**：计算各参数的敏感性系数和影响权重
- **最优区间确定**：基于敏感性分析确定参数的最优运行区间

### 4. 数据可视化与分析
- **性能曲线绘制**：生成参数-性能关系曲线，支持中英文双语显示
- **热力学图表**：绘制T-s图、h-s图等经典热力学图表
- **优化过程可视化**：展示遗传算法的进化过程和收敛特性
- **结果对比分析**：提供与基准工况和文献数据的对比分析

## 安装说明

### 系统要求

- Python 3.8+
- 操作系统：Windows/Linux/MacOS
- 内存：8GB+
- 存储：1GB+
- CPU：推荐多核处理器以加速优化过程

### 安装步骤

1. **下载代码**：
   ```bash
   git clone https://github.com/zduu/study.git
   cd study
   ```

2. **创建虚拟环境**：
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/MacOS
   venv\Scripts\activate     # Windows
   ```

3. **安装依赖**：
   ```bash
   pip install -r requirements.txt
   ```

## 使用指南

### 快速开始

**第一次使用建议按以下顺序运行：**

1. **生成系统参数** → 2. **运行完整仿真** → 3. **执行参数优化** → 4. **进行敏感性分析**

### 详细操作说明

#### 1. 系统参数管理

**生成循环参数**（推荐首次运行）：
```bash
python code/generate_cycle_parameters.py
```
- **功能**：基于四个关键变量自动生成完整的系统参数配置
- **输出**：`output/cycle_setup_parameters.json`
- **用途**：为后续仿真提供基础参数设置

**修改现有参数**：
```bash
python code/modify_cycle_parameters.py --t5_c 600 --pr_scbc 3.25 --theta_w_c 117.44 --pr_orc 4.0
```
- **功能**：修改四个关键优化变量，自动更新相关参数
- **参数说明**：
  - `--t5_c`：SCBC透平入口温度（°C）
  - `--pr_scbc`：SCBC主循环压比
  - `--theta_w_c`：ORC涡轮机入口温度（°C）
  - `--pr_orc`：ORC透平膨胀比

#### 2. 系统仿真与分析

**完整循环仿真**：
```bash
python code/full_cycle_simulator.py
```
- **功能**：执行SCBC-ORC联合循环的完整热力学仿真
- **输出**：详细的状态点数据、性能指标和能量平衡分析
- **结果文件**：`output/full_cycle_simulator_output.txt`

**状态点计算验证**：
```bash
python code/state_point_calculator.py
```
- **功能**：验证热力学物性计算的准确性，与文献数据对比
- **输出**：状态点计算结果和误差分析
- **用途**：确保计算模型的可靠性

**循环组件分析**：
```bash
python code/cycle_components.py
```
- **功能**：测试各个组件模型的功能和性能
- **输出**：组件级的详细计算结果
- **结果文件**：`output/cycle_components_output.txt`

#### 3. 参数优化

**遗传算法优化**（耗时较长，建议预留1-2小时）：
```bash
python code/genetic_algorithm_optimizer.py
```
- **功能**：使用遗传算法寻找系统最优运行参数
- **优化目标**：最大化总热效率和总㶲效率
- **输出**：优化过程日志和最优参数组合
- **结果文件**：`output/ga_optimization_log.csv`

#### 4. 敏感性分析

**SCBC压力比敏感性分析**：
```bash
python code/run_pr_sensitivity_analysis.py
```
- **功能**：分析SCBC主循环压比对系统性能的影响
- **扫描范围**：压比2.2-4.0，步长0.1
- **输出**：敏感性数据和性能曲线

**ORC压力比敏感性分析**：
```bash
python code/run_pr_orc_sensitivity_analysis.py
```
- **功能**：分析ORC透平膨胀比对系统性能的影响
- **扫描范围**：膨胀比2.0-4.0，步长0.1
- **输出**：ORC循环敏感性数据

#### 5. 结果可视化

**绘制SCBC敏感性图表**：
```bash
python code/plot_pr_sensitivity.py        # 英文版
python code/plot_pr_sensitivity_cn.py     # 中文版
```
- **功能**：生成压力比-性能关系图表
- **输出**：PNG格式的高质量图表文件

### 参数配置

1. **关键变量**：
   - `theta_5_c`：SCBC透平入口温度（℃）
   - `pr_scbc`：SCBC主循环压比
   - `pr_orc`：ORC透平膨胀比
   - `theta_w_c`：ORC涡轮机入口温度（℃）

2. **计算参数**：
   - `t9`：预冷器出口温度（℃）
   - `p_orc`：ORC蒸发压力（kPa）
   - `t_orc`：ORC泵入口温度（℃）

3. **性能指标**：
   - `eta_t`：总热效率（%）
   - `eta_e`：总火用效率（%）
   - `eta_e_ratio`：火用效率/卡诺效率比（%）

4. **遗传算法参数**：
   - `pop_size`：种群大小
   - `max_gen`：最大代数
   - `crossover_rate`：交叉率
   - `mutation_rate`：变异率
   - `elite_size`：精英保留数量

## 项目结构

```
study/
├── code/                                # 源代码目录
│   ├── cycle_components.py              # 循环组件定义与分析
│   ├── full_cycle_simulator.py          # 完整循环系统模拟器
│   ├── genetic_algorithm_optimizer.py   # 遗传算法优化器
│   ├── generate_cycle_parameters.py     # 循环参数生成工具
│   ├── modify_cycle_parameters.py       # 循环参数修改工具
│   ├── plot_pr_sensitivity.py           # 压力比敏感性分析绘图
│   ├── plot_pr_sensitivity_cn.py        # 中文版压力比敏感性分析绘图
│   ├── run_pr_orc_sensitivity_analysis.py  # ORC压力比敏感性分析
│   ├── run_pr_sensitivity_analysis.py   # 压力比敏感性分析
│   └── state_point_calculator.py        # 系统状态点计算器
├── md/                                  # 文档目录
│   ├── cycle_setup_parameters.md        # 循环参数设置文档
│   ├── system_overview.md               # 系统概述文档
│   └── replication_overview.md          # 论文复现工作概述
├── output/                              # 输出目录
│   ├── pr_orc_sensitivity_plot.png        # ORC压力比敏感性分析图
│   ├── pr_orc_sensitivity_results.csv     # ORC压力比敏感性分析结果数据
│   ├── ga_optimization_log.csv            # 遗传算法优化过程日志
│   ├── full_cycle_simulator_output.txt    # 完整循环模拟输出结果
│   ├── cycle_setup_parameters.json        # 循环参数设置文件
│   ├── pr_exergy_efficiency_plot.png      # 压力比-火用效率关系图
│   ├── pr_sensitivity_plot.png            # 压力比敏感性分析图
│   ├── pr_exergy_efficiency_plot_cn.png   # 压力比-火用效率关系图(中文版)
│   ├── pr_sensitivity_plot_cn.png         # 压力比敏感性分析图(中文版)
│   ├── pr_sensitivity_results.csv         # 压力比敏感性分析结果数据
│   ├── cycle_components_output.txt        # 循环组件分析输出结果
│   └── calculated_state_points_from_table10.csv  # 从表10计算的状态点数据
├── 资料/                                # 参考资料
├── .gitignore                           # Git忽略文件
├── readme.md                            # 项目说明文档
└── requirements.txt                     # 项目依赖文件，包含主要与可选依赖包
```

## 技术细节

### 热力学循环模型

#### SCBC（超临界CO₂布雷顿循环）
**工质特性**：
- **工质**：超临界CO₂（临界温度31.1°C，临界压力7.38 MPa）
- **工作状态**：超临界状态，具有类液体密度和类气体粘度的优异特性
- **环保特性**：GWP=1，ODP=0，完全环保无毒

**循环组成**（9个关键状态点）：
1. **主压缩机(MC)**：将CO₂从7.4 MPa压缩至约24.2 MPa
2. **再压缩机(RC)**：处理分流，提高循环效率
3. **低温回热器(LTR)**：回收低温段余热，效能0.86
4. **高温回热器(HTR)**：回收高温段余热，效能0.86
5. **加热器(ER)**：外部热源加热至599.99°C
6. **透平(T)**：膨胀做功，等熵效率0.90
7. **预冷器(CS)**：冷却至84.38°C

**数学模型**：
- 基于CoolProp库的精确状态方程
- 考虑实际设备效率和压降损失
- 采用迭代求解确保能量和质量平衡

#### ORC（有机朗肯循环）
**工质特性**：
- **工质**：R245fa（临界温度154.0°C，临界压力3.65 MPa）
- **工作状态**：亚临界状态，适合中低温热源
- **环保特性**：GWP=1030，正在被更环保工质替代

**循环组成**（4个关键状态点）：
1. **泵(PO)**：增压至蒸发压力，等熵效率0.75
2. **蒸发器(GO)**：吸收SCBC余热，实现循环耦合
3. **透平(TO)**：膨胀做功，等熵效率0.80
4. **冷凝器(CO)**：冷凝至饱和液体状态

**耦合机制**：
- 通过蒸发器(GO)实现热力耦合
- SCBC循环的低温余热作为ORC循环的热源
- 设计温差≥10°C确保有效传热

### 优化算法详解

#### 遗传算法配置
- **种群规模**：50个个体
- **进化代数**：100代
- **精英保留**：每代保留最优个体
- **交叉概率**：0.9
- **变异概率**：0.25

#### 适应度函数
```
Fitness = α×η_t + β×η_e + γ×Cost_factor
```
其中：
- α=0.4（热效率权重）
- β=0.6（㶲效率权重）
- γ=0.0（经济性权重）
- η_t：总热效率
- η_e：总㶲效率

#### 约束条件
- **温度约束**：500°C ≤ T₅ ≤ 600°C，100°C ≤ θ_w ≤ 130°C
- **压力约束**：2.2 ≤ PR_SCBC ≤ 4.0，2.0 ≤ PR_ORC ≤ 4.0
- **传热约束**：换热器最小温差≥10°C
- **物理约束**：确保所有状态点的热力学可行性

### 敏感性分析方法

#### 参数扫描策略
- **SCBC压比敏感性**：2.2-4.0范围，步长0.1（共19个点）
- **ORC膨胀比敏感性**：2.0-4.0范围，三个透平温度，步长0.2（共30个点）
- **固定其他参数**：保持最优值不变

#### 性能评价指标
1. **热效率**：η_t = W_net / Q_in
2. **㶲效率**：η_e = W_net / E_in
3. **㶲效率比**：η_e / η_carnot
4. **单位功率成本**：Cost/kW

#### 敏感性系数计算
```
S = (ΔY/Y) / (ΔX/X)
```
其中S为敏感性系数，Y为性能指标，X为设计参数

## 相关文档

本项目包含以下文档，详细说明系统的各个方面：

- [系统概述](md/system_overview.md) - 描述SCBC-ORC联合循环系统的基本原理和组成
- [循环参数设置](md/cycle_setup_parameters.md) - 详细说明系统参数设置和约束条件
- [论文复现工作概述](md/replication_overview.md) - 对《超临界CO₂布雷顿循环余热回收系统性能分析与优化》论文的复现报告